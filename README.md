# 리그오브레전드 챔피언과 아이템 간의 네트워크 분석



## 1. 연구 배경 및 목표

- COVID19로 e스포츠 인기(중단된 오프라인 스포츠의 빈자리)
- 리그오브레전드 시장성에 주목(20년도 롤드컵 결승전 시청자수 4600만명)
  - 골드만 삭스 曰 e스포츠 시장 규모 2022년 29억6300만달러로 연평균 35% 성장
- 리그오브레전드에 대한 데이터 분석 최근 활발(논문, Kaggle, OP.GG, fow 등)
  - **소셜 네트워크 분석을 활용한** **리그오브레전드** **추천시스템 개발 승리를 위한 팀원 및 캐릭터 추천 알고리즘**
  - **양방향 순환신경망** **임베딩을** **이용한** **리그오브레전드** **승패 예측**
  - **딥러닝을** **이용한** **리그오브레전드** **승패 예측 예비 연구**
- 전략 시뮬레이션 게임 -> 데이터 분석 필요



<img src="README_PNG\image_01.png" alt="image_01">

- 리그오브레전드는 각 팀별로 총 157명의 챔피언 중 5명의 챔피언을 전략적으로 선택하여 상대 팀의 기지를 모두 파괴하여 승리를 쟁취하는 전략 시뮬레이션 게임

- 여기서 아이템은 챔피언의 능력을 상승시켜주는 요인



<img src="README_PNG\image_02.png" alt="image_02">

- 아이템에는 대표적으로 두가지의 유형 – 공격력(AD)에 영향을 주는 아이템과 주문력(AP)에 영향을 주는 아이템
- 여기서 공격력(AD)을 상승시켜주는 아이템과 방어할 수 있는 아이템이 있고 주문력(AP)을 상승시켜주는 아이템과 방어할 수 있는 아이템으로 나뉨.
- 또한 챔피언 별로 공격력 아이템에 효과적인 챔피언과 주문력 아이템에 효과적인 챔피언으로 나뉘게 됨.
- 여기서 같은 팀의 챔피언들의 아이템이 서로 같은 유형으로 몰리게 된다면(ex. AD) 상대적으로 상대 팀에서는 그 유형의 아이템(ex. AD)을 잘 방어할 수 있는 아이템(방어력)을 가게 되면 데미지를 주기 어려움.
- 따라서 리그오브레전드에서는 챔피언과 아이템 간의 조합이 굉장히 중요.
- 최종적으로 챔피언과 아이템 간의 관계를 통해 챔피언들 간의 네트워크 분석을 하여, 유사도와 같은 구조적 특성을 파악하여 챔피언 선택과 팀 조합에 인사이트를 주고자 함.



## 2. 노드와 링크의 정의



<img src="README_PNG\image_03.png" alt="image_03">

- 챔피언과 아이템 간의 2-mode 연결망을 통해 네트워크를 구성.
- 노드는 원모양의 챔피언과 네모모양의 아이템이 되겠고 링크는 챔피언과 아이템 간의 관계로서 원모양의 챔피언이 네모모양의 아이템을 구매하면 연결이 되는 관계라고 정의.
- 추후에 2-mode 연결망 자체로 분석하기 보다는 분석에 용이하게끔 1-mode 연결망으로 변환하여 분석하도록 함.

- 아이템이 겹치는 챔피언들은 사회연결망의 링크가 있는 관계인 것으로 정의.
- 챔피언을 row, 아이템을 column으로 하는 2-mode에서 챔피언-챔피언 간의 1-mode 연결망 도출.
- 아래는 그 과정을 나타내는 식. 

<img src="README_PNG\image_04.png" alt="image_04">

- 먼저 A라는 챔피언과 아이템의 행렬을 A Transpose인 아이템과 챔피언의 행렬로 곱하면 아이템이 없어지고 챔피언과 챔피언 간의 행렬로 나타냄.



<img src="README_PNG\image_05.png" alt="image_05">

- 위의 왼쪽 메모장은 유씨넷을 통해 챔피언과 아이템과의 행렬을 Affiliation 2-mode to 1-mode를 진행하여 오른쪽 메모장처럼 챔피언과 챔피언의 행렬인 1-mode로 나타나진 것을 확인할 수 있음.

## 3. 자료 수집

- 리그오브레전드 통계 사이트인 FOW.KR 에서 챔피언통계 탭에 챔피언별 아이템 선호도 top 10을 웹크롤링을 통해 데이터 확보
- 즉, 총 157명의 챔피온 별 top 10의 아이템 데이터를 추출

<img src="README_PNG\image_06.png" alt="image_06">



- 코드 구축하여 colab으로 데이터프레임 구축 -> 엑셀로 내보냄

<img src="README_PNG\image_07.png" alt="image_07">



## 4. 네트워크 분석

<img src="README_PNG\image_08.png" alt="image_08">

- 처음 챔피언과 챔피언 간의 1-mode 상태의 행렬을 netdraw로 시각화
- 일반적인 챔피언의 특성을 통해 확인해봤을 때 AD 챔피언과 AP 챔피언이 나뉘어져 네트워크를 구성하는 것을 확인할 수 있음.
- 일단 링크가 너무 많아 일정 수 이상 디카토마이즈를 진행할 필요가 있음.

### 4. 1 Dichotomize

<img src="README_PNG\image_09.png" alt="image_09">

- 위 그림은 디카토마이즈를 진행한 내용.
- 모든 챔피언은 최대 6개의 아이템을 구매할 수 밖에 없기 때문에 챔피언 간 아이템이 5개 이상 같다면 어느정도 유사성이 있다고 판단하여 챔피언 간의 단순매칭 계수가 0.5이상인 노드만 디카토마이즈를 진행.
- 왼쪽 표는 챔피언 간의 디카토마이즈를 진행하여 (1,0)의 행렬로 나타낸 표.
- 오른쪽그림은 ucinet의 netdraw를 활용하여 시각화한것입니다. 그전보다 훨씬 보기 좋게 시각화된 것을 확인할 수 있음.
- 여기서 챔피언의 특성을 통해 확인해보았을 때 AD아이템에 효율적인 챔피언, 나중에 따로 설명을 드리겠지만 체력 아이템에 효율적인 탱커 챔피언, 그리고 AP 아이템에 효율적인 챔피언들이 잘 모여서 네트워크를 구성하는 것을 확인할 수 있음.



### 4. 2 Jaccard

<img src="README_PNG\image_10.png" alt="image_10">

- 챔피언 간의 자카드 계수가 0.5이상이면 어느정도 유사성이 있다고 판단하여 디카토마이즈를 진행.
- 왼쪽 위에 있는 표는 챔피언간의 자카드 계수를 나타냅니다. 그리고 밑에 표는 자카드계수를 통해 디카토마이즈를 진행한 결과.
- 오른쪽그림은 ucinet의 netdraw를 활용하여 시각화. 그전에 단순매칭 계수로 디카토마이즈를 진행했을때보다는 많은 챔피언들이 제외되어 결과가 좋지 않은 것을 확인할 수 있음.



### 4. 3 Dendrogram

<img src="README_PNG\image_11.png" alt="image_11">

- Ucinet에서 챔피언 간의 계층적 군집분석을 통해 덴드로그램으로 나타냄.
- 세개의 클러스터로 나누면 챔피언이 각각 41개, 64개, 52개로 분류.
- 이것은 일반적인 챔피언의 특성을 생각했을 때 AD 아이템에 효율적인 챔피언 41개, AP 아이템에 효율적인 챔피언 64개, AD와 AP를 포함해서 체력을 올리는 탱커 챔피언 52개로  나뉘어졌다고 할 수 있음. 
- 여기서 탱커는 상대팀의 데미지를 앞에서 막아주는 역할로 주로 체력을 상승시키는 아이템을 구매하는 챔피언의 유형임.



### 4. 4 Network Modularity

<img src="README_PNG\image_12.png" alt="image_12">

- Gephi 통해 네트워크 시각화
- 단순매칭계수 0.5이상 디카토마이즈 행렬로 네트워크분석을 실시
- Network Modularity class로 나눠봤을 때 총 6가지의 class가 나타남 → 챔피언의 아이템 유사도를 기준으로 6가지 유형의 챔피언이 있다고 할 수 있음.
- 그렇다면 이 6가지의 클래스 중 같은 클래스, 즉 그래프로 봤을 때 같은 색의 챔피언이 많이 중복되면 아이템도 비슷하게 가기 때문에 상대팀에서는 그 아이템에 대처할 수 있는 아이템을 가게 되면 상대팀에게 데미지를 주기가 어려워짐.
- 따라서 같은 색의 챔피언은 최대한 선택을 안하는 것이 좋음.



<img src="README_PNG\image_13.png" alt="image_13">



- 위 그림은 이전 그림과 다르게 단순매칭 계수를 0이하로 디카토마이즈 하여 0이하인 것을 1, 0 초과인것을 0으로 하여 (1,0)의 행렬로 나타낸 것을 gephi로 네트워크 시각화.
- 즉 서로 유사도가 없을 때 연결이 됨 → 이를 통해 한 챔피언 노드를 선택 할 시 나타나는 다른 챔피언 노드들은 아이템 유사도가 없는 챔피언이라는 것을 알 수 있음.
- 그렇다면 챔피언 선택 시 나타난 다른 챔피언 노드들 중 하나를 선택하는 것이 아이템이 다양해지기 때문에 상대팀이 상대하기에 까다로워짐.
- 예를 들어 우리팀에서 리신이라는 챔피언을 선택했다면 아칼리나 오리아나 빅토르  챔피언을 선택하는 것이 아이템 다양성으로 상대팀에게 더 많은 데미지를 줄 수 있음.



## 5. Conclusion and Limitation

<img src="README_PNG\image_14.png" alt="image_14">

### Contribution)

- 지금까지 조사한 챔피언과 아이템 간의 네트워크 분석을 통해 왼쪽 그림을 메인 지표로 삼아 모듈러리티 클래스가 같은 챔피언의 선택은 피하고 보조 지표로서 
  챔피언 선택 시 나타나는 연결된 챔피언을 선택하는 것이 상대팀으로 하여금 상대하기 까다롭게 만들어 승률을 높일 수 있을 것.
- 예를 들어 우리팀에 처음 에코라는 챔피언을 선택했을 시 메인지표에서 에코와 같은 색상의 챔피언은 피하고 다른 색상의 챔피언 중 보조지표에 연결된 챔피언을 선택하여 조합하는 것이 챔피언 별로 다양한 아이템을 사용하게 되어 상대팀이 쉽게 대처하지 못하도록 하여 큰 데미지를 주기가 쉬움. 
- 최종적으로 이러한 방법을 활용하면 효율적인 챔피언 선택과 팀 조합을 추천해주는 인사이트를 줌.



### Limitation)

- 이러한 지표들을 사용하여 챔피언 조합을 구성했을 시 과연 정말로 승률에 영향을 끼칠 수 있는지를 검증해야 함.
- 본인이 연구한 내용에 추가하여 추후에 기대되는 연구로는 상대가 뽑은 챔피언들에 대해 승률을 기준으로 상대하기 쉬운 카운터 픽 챔피언들을 directed network로 구성하여 네트워크 분석을 통해 챔피언을 다양한 요인을 통해서 추천해주는 하나의 추천 알고리즘을 구축하는 연구가 될 것입니다. 



### 정리)

- 여러가지 방법(단순매칭, 자카드 계수, 상관성, 덴드로그램)을 통해 네트워크 분석을 진행함.
- 그 중 단순매칭 계수라는 유사도 측정 지표를 활용하여 dichotomize 진행 (1,0)의 행렬로 나타냈고 이러한 행렬로 Gephi 프로그램을 통해 네트워크 그래프를 시각화하여  챔피언 선택과 팀 조합에 인사이트를 줌. 
- 네트워크 분석을 통해 하나의 추천시스템을 구축.